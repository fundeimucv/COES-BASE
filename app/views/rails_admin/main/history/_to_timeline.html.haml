
- if versions.any?
  .timeline
    .row.mb-3.text-center.px-2
      .col-6.border.p-2.bg-info.bg-opacity-25
        Actividades realizados por el Usuario
      .col-6.border.p-2.bg-success.bg-opacity-25
        Actividades realizados sobre el Usuario

    - versions.each do |version|
      - if version.whodunnit.present? and !(version.whodunnit.eql? @object.user.id.to_s)
        - alignment_class = 'right bg-success bg-opacity-25'
        - text_date = 'float-start'
        - text_id = 'float-end'
      - else
        - alignment_class = 'left bg-info bg-opacity-25'
        - text_id = 'float-start'
        - text_date = 'float-end'

      %div{ class: "timeline-item #{alignment_class} mb-3" }
        .timeline-marker
          %i{class: " #{version.fa_icon(@object)} "}

        .timeline-content.p-2
          .card.border-0.shadow-sm
            .card-header
              %small{class: "text-muted #{text_date}"}= version.created_at.strftime('%d/%m/%Y %H:%M:%S')
              %i{class: "text-muted #{text_id}", style: 'font-size: xx-small;'}
                = version.id
                %label= t("activerecord.models.#{version.item_type.underscore}.one", default: version.item_type)  

              .p-2.m-2
                - if !version.whodunnit.present?
                  - if version.item_type.eql? 'User'
                    - user = user_default 
                    = render partial: 'rails_admin/main/history/versions_user_card', locals: { user: user }
                - else
                  - user = User.find_by(id: version.whodunnit)
                  - if user
                    = render partial: 'rails_admin/main/history/versions_user_card', locals: { user: user }
                  - else
                    .text-muted.small Sistema: #{version.whodunnit}
                .bg-info.text-dark.p-2= "#{version.version_desc}"

:css
  .timeline {
    position: relative;
    padding: 0;
    margin: 1rem 0 0 0;
  }
  
  .timeline::before {
    content: '';
    position: absolute;
    left: 50%;
    top: 0;
    bottom: 0;
    width: 2px;
    transform: translateX(-1px);
    background: linear-gradient(to bottom, #007bff, #6c757d);
  }
  
  .timeline::after {
    content: '';
    display: table;
    clear: both;
  }
  
  .timeline-item {
    position: relative;
    width: 50%;
    box-sizing: border-box;
    padding: 1rem 0rem 1rem 1rem;
  }
  
  .timeline-item.left {
    float: left;
    text-align: right;
    margin-right: 50%;
  }
  
  .timeline-item.right {
    float: right;
    text-align: left;
    margin-left: 50%;
  }
  
  .timeline-marker {
    position: absolute;
    top: 0.5rem;
    width: 2rem;
    height: 2rem;
    background: white;
    border: 3px solid #007bff;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 2;
  }
  
  .timeline-item.left .timeline-marker {
    left: 100%;
    transform: translateX(-50%);
  }
  
  .timeline-item.right .timeline-marker {
    left: 0%;
    transform: translateX(-50%);
  }
  
  .timeline-item.create .timeline-marker {
    border-color: #28a745;
  }
  
  .timeline-item.update .timeline-marker {
    border-color: #ffc107;
  }
  
  .timeline-item.destroy .timeline-marker {
    border-color: #dc3545;
  }
  
  .timeline-item.left .timeline-content {
    margin-right: 2rem;
  }
  
  .timeline-item.right .timeline-content {
    margin-left: 2rem;
  }
  
  /* Estilos para timelines peque√±os */
  .timeline-small {
    position: relative;
    padding-left: 1.5rem;
  }
  
  .timeline-small::before {
    content: '';
    position: absolute;
    left: 0.75rem;
    top: 0;
    bottom: 0;
    width: 1px;
    background: #dee2e6;
  }
  
  .timeline-item-small {
    position: relative;
    margin-bottom: 0.5rem;
  }
  
  .timeline-marker-small {
    position: absolute;
    left: -0.75rem;
    top: 0.25rem;
    width: 1rem;
    height: 1rem;
    background: white;
    border: 2px solid #6c757d;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1;
  }
  
  .timeline-item-small.create .timeline-marker-small {
    border-color: #28a745;
  }
  
  .timeline-item-small.update .timeline-marker-small {
    border-color: #ffc107;
  }
  
  .timeline-item-small.destroy .timeline-marker-small {
    border-color: #dc3545;
  }
  
  .timeline-content-small {
    margin-left: 0.5rem;
  }
